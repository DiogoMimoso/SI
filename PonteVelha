from searchPlus import *

class PonteVelha(Problem):
   
    def __init__(self, capacidade=2,viajantes={1,2,5,10}):
        self.capacidade = capacidade
        self.viajantes = viajantes
        self.initial = (False, False, False, False, False)
        self.goal = (True, True, True, True, True)
   
    def actions(self, state):
       
        
        return ['atravessa 1 + 2','atravessa 1 + 5', 'atravessa 1 + 10', 'atravessa 2 + 5', 'atravessa 2 + 10', 'atravessa 5 + 10', 
                'atravessa 1 + 2 + 5 ',  'atravessa 1 + 2 + 10', 'atravessa 1 + 5 + 10','atravessa 2 + 5 + 10' ]
        
        
   def result(self, state, action):
        """Return the state that results from executing the given 
        action in the given state. The action must be one of
        self.actions(state)."""

        s = list(state)
        
        if s[action] == 'atravessa 1 + 2':
            (True, True, True, False, False)
        if s[action] == 'atravessa 1 + 5':
             (True, True, False, True, False)
        if s[action] == 'atravessa 1 + 10':
             (True, True, False, False, True)
        if s[action] == 'atravessa 2 + 5':
             (True, False, True, True, False)
        if s[action] == 'atravessa 2 + 10':
             (True, False, True, False, True)
        if s[action] == 'atravessa 5 + 10':
             (True, False, False, True, True)
        if s[action] == 'atravessa 1 + 2 + 5':
             (True, False, True, True, False)
        if s[action] == 'atravessa 1 + 2 + 10':
             (True, True, True, False, True)
        if s[action] == 'atravessa 1 + 5 + 10':
             (True, True, False, True, True)
        if s[action] == 'atravessa 2 + 5 + 10':
             (True, False, True, True, True)
        return tuple(s)     
    def path_cost(self, c, state1,action,next_state):
        "custo vai ser sempre igual ao tempo que demora o mais lento a atravessar a ponte"
    
    def executa(self,state,actions):
        """Executa a sequência de acções (em actions) e devolve o último estado"""
        nstate=state
        for a in actions:
            nstate=p.result(nstate,a)
        return nstate
